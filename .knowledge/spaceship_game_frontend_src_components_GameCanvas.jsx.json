{"is_source_file": true, "format": "JavaScript/JSX", "description": "This file defines a React component called GameCanvas responsible for rendering a 2D space-themed game scene with parallax backgrounds, entities (player ship, rockets, bullets, bombs), particle effects, and explosion animations. It manages game loop logic, rendering, collision detection, and scene building with detailed visual effects and interactive gameplay mechanics.", "external_files": ["react"], "external_methods": ["useEffect", "useRef"], "published": ["GameCanvas"], "classes": [], "methods": [{"name": "buildAllScenery()", "description": "Builds terrain, hills, mountains, clouds, stars, and nebulae layers based on current level and canvas size.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "buildTerrain()", "description": "Generates procedural terrain points for the ground layer based on level and canvas width.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "buildHills()", "description": "Generates procedural hill layer points.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "buildMountains()", "description": "Generates procedural mountain layer points.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "seedClouds()", "description": "Initializes cloud shape objects with random positions, scales, and velocities.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "seedStars()", "description": "Initializes star objects with positions, brightness, twinkle parameters, and drift velocities.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "seedNebulae()", "description": "Generates nebulae objects with positions, opacity, color, and motion parameters.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "shoot()", "description": "Fires a bullet if enough time has passed since last shot, invokes onShoot callback.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "bomb()", "description": "Drops a bomb with a fuse, triggers onBomb callback.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "spawnRockets(dt)", "description": "Procedurally spawns rockets based on level and spawn rate, positions rockets on terrain.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "aabb(a, b)", "description": "Axis-Aligned Bounding Box collision detection.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "explode(x, y, count = 12, intensity = 'normal')", "description": "Handles explosion effects including screen shake, particles, shockwaves, and flashes with level scaling.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "triggerScreenShake(intensity, duration)", "description": "Sets screen shake intensity and duration if higher than current.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "updateScreenShake(dt)", "description": "Calculates current screen shake offsets based on shake duration and intensity.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "loop(now)", "description": "Main game rendering and update loop called via requestAnimationFrame, handles physics, drawing, collision, and effects.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "groundYAt(x)", "description": "Returns terrain Y coordinate at a given X, considering terrain offset.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "drawSky(ctx)", "description": "Draws the background sky with Heritage Brown inspired gradient.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "drawClouds(ctx)", "description": "Draws cloud shapes based on current cloud objects.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "drawStars(ctx)", "description": "Draws stars with twinkle animation and drift.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "drawNebulae(ctx)", "description": "Draws nebulae with pulsing and drifting effect.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "drawCloudShape(ctx, x, y, scale = 1, opacity = 0.75)", "description": "Renders a puffy cloud shape at specified position, scale, and opacity.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "drawMountains(ctx)", "description": "Draws mountainous silhouette with parallax offset.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "drawHills(ctx)", "description": "Draws rolling hills layer with parallax.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "drawTerrain(ctx)", "description": "Draws ground terrain based on generated points.", "scope": "GameCanvas", "scopeKind": "function"}, {"name": "drawRocket", "description": "Draws an individual rocket with animated exhaust and wobble effect."}, {"name": "drawEnhancedShip", "description": "Draws the player's ship with enhanced visual effects such as flickering lights, engine heat, damage flashes, and wing flicker."}, {"name": "GameCanvas({ running, level, onScore, onLoseLife, onLevelProgress, onShoot, onBomb, })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "makeCloud(x, y, scale)", "scope": "GameCanvas", "scopeKind": "function", "description": "unavailable"}], "search-terms": ["parallax background", "rockets spawn", "space game", "explosion particles", "GameCanvas React component", "Heritage Brown theme", "procedural terrain", "space shooter"], "state": 2, "file_id": 13, "knowledge_revision": 74, "git_revision": "69080df680792f4bb2927ddc878a7132cfdc48cb", "revision_history": [{"31": ""}, {"51": "d9ac84c7cc01e192a1c973c001bc6117b0dfd737"}, {"52": "d9ac84c7cc01e192a1c973c001bc6117b0dfd737"}, {"53": "d9ac84c7cc01e192a1c973c001bc6117b0dfd737"}, {"54": "d9ac84c7cc01e192a1c973c001bc6117b0dfd737"}, {"55": "d9ac84c7cc01e192a1c973c001bc6117b0dfd737"}, {"56": "d9ac84c7cc01e192a1c973c001bc6117b0dfd737"}, {"59": "61880ee4adf3da60ec404c3a5c48d6cd3a5d457c"}, {"61": "61880ee4adf3da60ec404c3a5c48d6cd3a5d457c"}, {"62": "61880ee4adf3da60ec404c3a5c48d6cd3a5d457c"}, {"63": "61880ee4adf3da60ec404c3a5c48d6cd3a5d457c"}, {"64": "61880ee4adf3da60ec404c3a5c48d6cd3a5d457c"}, {"65": "61880ee4adf3da60ec404c3a5c48d6cd3a5d457c"}, {"66": "69080df680792f4bb2927ddc878a7132cfdc48cb"}, {"67": "69080df680792f4bb2927ddc878a7132cfdc48cb"}, {"68": "69080df680792f4bb2927ddc878a7132cfdc48cb"}, {"69": "69080df680792f4bb2927ddc878a7132cfdc48cb"}, {"70": "69080df680792f4bb2927ddc878a7132cfdc48cb"}, {"71": "69080df680792f4bb2927ddc878a7132cfdc48cb"}, {"72": "69080df680792f4bb2927ddc878a7132cfdc48cb"}, {"73": "69080df680792f4bb2927ddc878a7132cfdc48cb"}, {"74": "69080df680792f4bb2927ddc878a7132cfdc48cb"}], "ctags": [{"_type": "tag", "name": "GameCanvas", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^function GameCanvas({$/", "language": "JavaScript", "kind": "function", "signature": "({ running, level, onScore, onLoseLife, onLevelProgress, onShoot, onBomb, })"}, {"_type": "tag", "name": "aabb", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function aabb(a, b) {$/", "language": "JavaScript", "kind": "function", "signature": "(a, b)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "bomb", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function bomb() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "buildAllScenery", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function buildAllScenery() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "buildHills", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function buildHills() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "buildMountains", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function buildMountains() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "buildTerrain", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function buildTerrain() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "canvasRef", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  return <canvas ref={canvasRef} role=\"img\" aria-label=\"Game canvas with parallax terrain\"><\\/ca/", "language": "JavaScript", "kind": "field", "scope": "GameCanvas.AnonymousClasse7f5d5360101", "scopeKind": "class"}, {"_type": "tag", "name": "drawCloudShape", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function drawCloudShape(ctx, x, y, scale = 1, opacity = 0.75) {$/", "language": "JavaScript", "kind": "function", "signature": "(ctx, x, y, scale = 1, opacity = 0.75)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "drawClouds", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function drawClouds(ctx) {$/", "language": "JavaScript", "kind": "function", "signature": "(ctx)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "drawHills", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function drawHills(ctx) {$/", "language": "JavaScript", "kind": "function", "signature": "(ctx)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "drawMountains", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function drawMountains(ctx) {$/", "language": "JavaScript", "kind": "function", "signature": "(ctx)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "drawNebulae", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function drawNebulae(ctx) {$/", "language": "JavaScript", "kind": "function", "signature": "(ctx)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "drawSky", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function drawSky(ctx) {$/", "language": "JavaScript", "kind": "function", "signature": "(ctx)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "drawStars", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function drawStars(ctx) {$/", "language": "JavaScript", "kind": "function", "signature": "(ctx)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "drawTerrain", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function drawTerrain(ctx) {$/", "language": "JavaScript", "kind": "function", "signature": "(ctx)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "explode", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function explode(x, y, count = 12, intensity = 'normal') {$/", "language": "JavaScript", "kind": "function", "signature": "(x, y, count = 12, intensity = 'normal')", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "groundYAt", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function groundYAt(x) {$/", "language": "JavaScript", "kind": "function", "signature": "(x)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "h", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^    const shipBox = { x: st.ship.x, y: st.ship.y, w: st.ship.w, h: st.ship.h };$/", "language": "JavaScript", "kind": "property", "scope": "GameCanvas.loop.shipBox", "scopeKind": "class"}, {"_type": "tag", "name": "loop", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function loop(now) {$/", "language": "JavaScript", "kind": "function", "signature": "(now)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "makeCloud", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function makeCloud(x, y, scale) {$/", "language": "JavaScript", "kind": "function", "signature": "(x, y, scale)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "seedClouds", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function seedClouds() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "seedNebulae", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function seedNebulae() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "seedStars", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function seedStars() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "shipBox", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^    const shipBox = { x: st.ship.x, y: st.ship.y, w: st.ship.w, h: st.ship.h };$/", "language": "JavaScript", "kind": "class", "scope": "GameCanvas.loop", "scopeKind": "class"}, {"_type": "tag", "name": "shoot", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function shoot() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "spawnRockets", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function spawnRockets(dt) {$/", "language": "JavaScript", "kind": "function", "signature": "(dt)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "triggerScreenShake", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function triggerScreenShake(intensity, duration) {$/", "language": "JavaScript", "kind": "function", "signature": "(intensity, duration)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "updateScreenShake", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^  function updateScreenShake(dt) {$/", "language": "JavaScript", "kind": "function", "signature": "(dt)", "scope": "GameCanvas", "scopeKind": "function"}, {"_type": "tag", "name": "w", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^    const shipBox = { x: st.ship.x, y: st.ship.y, w: st.ship.w, h: st.ship.h };$/", "language": "JavaScript", "kind": "property", "scope": "GameCanvas.loop.shipBox", "scopeKind": "class"}, {"_type": "tag", "name": "x", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^    const shipBox = { x: st.ship.x, y: st.ship.y, w: st.ship.w, h: st.ship.h };$/", "language": "JavaScript", "kind": "property", "scope": "GameCanvas.loop.shipBox", "scopeKind": "class"}, {"_type": "tag", "name": "y", "path": "/home/kavia/workspace/code-generation/galactic-defender-87118-87285/spaceship_game_frontend/src/components/GameCanvas.jsx", "pattern": "/^    const shipBox = { x: st.ship.x, y: st.ship.y, w: st.ship.w, h: st.ship.h };$/", "language": "JavaScript", "kind": "property", "scope": "GameCanvas.loop.shipBox", "scopeKind": "class"}], "hash": "fb7c6bd81968df6f13ecd402e48a6495", "format-version": 4, "code-base-name": "spaceship_game_frontend", "filename": "spaceship_game_frontend/src/components/GameCanvas.jsx", "fields": [{"name": "return <canvas ref={canvasRef} role=\"img\" aria-label=\"Game canvas with parallax terrain\"><\\/ca/", "scope": "GameCanvas.AnonymousClasse7f5d5360101", "scopeKind": "class", "description": "unavailable"}, {"name": "const shipBox = { x: st.ship.x, y: st.ship.y, w: st.ship.w, h: st.ship.h };", "scope": "GameCanvas.loop.shipBox", "scopeKind": "class", "description": "unavailable"}]}